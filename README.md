# 圆形图片转换工具

一个功能强大的图片处理工具，可以将各种格式的图片转换为带透明背景的圆形图片。支持智能人脸检测、多种处理模式和批量处理功能。

## 功能特点

- **多种处理模式**
  - 默认模式：根据长边等比例缩放并相切，适合一般图片
  - 四角相切模式：确保原图完整显示且四角与圆形相切，适合方形图片
  - 人脸检测模式：智能检测人脸位置并居中，适合头像处理

- **智能特征检测**
  - 正面人脸检测
  - 侧面人脸检测
  - 眼睛检测
  - 嘴巴检测
  - 上半身躯干检测

- **图片处理**
  - 支持透明背景
  - 智能特征居中
  - 自动边界处理
  - 可自定义DPI

- **格式支持**
  - 输入格式：PNG, JPG/JPEG, BMP, GIF, WebP, TIFF, JFIF
  - 输出格式：PNG（推荐）, JPEG, BMP, WebP, TIFF, JFIF

- **其他特性**
  - 批量处理功能
  - 实时预览
  - 手动选择模式
  - 详细的处理统计
  - 多语言界面（中英双语）

## 安装说明

1. 确保已安装Python 3.6或更高版本
2. 克隆或下载本项目
3. 安装依赖包：
```bash
pip install -r requirements.txt
```

## 使用方法

### 基本用法

```bash
# 使用默认设置（500px，PNG格式）
python circle_image_converter.py

# 指定输出尺寸为1000像素，使用四角相切模式
python circle_image_converter.py --size 1000px --fit

# 使用人脸检测模式，输出为300DPI的JPEG格式，并启用预览窗口
python circle_image_converter.py --face --dpi 300 --output-format JPEG --preview

# 在输出文件名前添加模式前缀
python circle_image_converter.py --prefix
```

### 命令行参数

- `--size`：设置圆形画布尺寸（默认：500px）
  - 支持单位：px（像素）, mm（毫米）, cm（厘米）
  - 示例：500px, 50mm, 5cm

- `--dpi`：设置输出图片DPI（默认：300）

- `--fit`：启用四角相切模式

- `--face`：启用人脸检测模式

- `--preview`：启用处理过程预览窗口

- `--prefix`：在输出文件名前添加模式前缀

- `--manual`：启用手动选择模式（仅在使用--face时有效）

- `--input-format`：指定输入图片格式（默认：PNG）

- `--output-format`：指定输出图片格式（默认：PNG）

### 手动模式操作说明

在手动模式下（使用 `--face --manual` 参数），可以通过以下按键选择处理方式：

- `1`：人脸检测模式
- `2`：默认模式
- `3`：四角相切模式
- `ESC`：跳过当前图片

## 注意事项

1. 人脸检测模式下，如果未检测到特征，将自动使用默认模式处理
2. 建议使用PNG格式输出以保持透明背景
3. 输出DPI会影响实际像素大小：实际像素 = size * (dpi/300)